<!DOCTYPE html><html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcolo Detrazioni 2025‚Äì2027</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f9;
            margin: 0;
            padding: 20px;
        }
        .container {
            background-color: white;
            max-width: 700px;
            margin: auto;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        label {
            font-weight: bold;
            display: block;
            margin-top: 15px;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
        }
        button {
            margin-top: 20px;
            padding: 10px 15px;
            background-color: #0056b3;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .output {
            margin-top: 20px;
            font-size: 1.1em;
            background: #eaf1fb;
            padding: 15px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
<div class="container">
    <h2>üí∞ Calcolo Detrazioni Edilizie 2025‚Äì2027</h2>
    <label for="reddito">Reddito complessivo (‚Ç¨):</label>
    <input type="number" id="reddito" min="0"><label for="figli">Numero di figli fiscalmente a carico:</label>
<select id="figli">
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3 o pi√π</option>
</select>

<label for="disabilita">Presenza figli con disabilit√†?</label>
<select id="disabilita">
    <option value="no">No</option>
    <option value="si">S√¨</option>
</select>

<label for="abitazione">Tipo di immobile:</label>
<select id="abitazione">
    <option value="principale">Abitazione principale</option>
    <option value="secondaria">Altra unit√† immobiliare</option>
</select>

<label for="tipologia">Tipologia detrazione:</label>
<select id="tipologia">
    <option value="bonusCasa">Bonus Casa</option>
    <option value="ecobonus">Ecobonus</option>
    <option value="sismabonus">Sisma Bonus</option>
    <option value="superbonus">Superbonus</option>
</select>

<label for="anno">Anno sostenimento spesa:</label>
<select id="anno">
    <option value="2025">2025</option>
    <option value="2026">2026</option>
    <option value="2027">2027</option>
</select>

<label><input type="checkbox" id="art15"> La detrazione rientra tra quelle dell'art. 15 TUIR (es. spese scolastiche, funebri, veterinarie)</label>

<button onclick="calcolaDetrazione()">Calcola</button>
<div class="output" id="risultato"></div>

</div><script>
function calcolaDetrazione() {
    const reddito = parseFloat(document.getElementById("reddito").value);
    const figli = parseInt(document.getElementById("figli").value);
    const disabilita = document.getElementById("disabilita").value;
    const abitazione = document.getElementById("abitazione").value;
    const tipologia = document.getElementById("tipologia").value;
    const anno = parseInt(document.getElementById("anno").value);
    const isArt15 = document.getElementById("art15").checked;

    let output = "";

    if (reddito > 75000) {
        let importoBase = reddito > 100000 ? 8000 : 14000;
        let coeff = 0.5;
        if (disabilita === "si" || figli >= 3) {
            coeff = 1.0;
        } else if (figli === 2) {
            coeff = 0.85;
        } else if (figli === 1) {
            coeff = 0.7;
        }
        const massimo = importoBase * coeff;
        output += `‚ö†Ô∏è Reddito superiore a 75.000 ‚Ç¨ ‚Üí Massimo detraibile soggetto a limite: <strong>${massimo.toLocaleString()} ‚Ç¨</strong><br>`;
    } else {
        output += `‚úÖ Reddito sotto 75.000 ‚Ç¨ ‚Üí Nessuna limitazione sul tetto detraibile<br>`;
    }

    // Calcolo aliquota base
    let aliquota = 0;
    if (tipologia === "bonusCasa" || tipologia === "ecobonus" || tipologia === "sismabonus") {
        if (abitazione === "principale") {
            aliquota = (anno === 2025) ? 0.50 : 0.36;
        } else {
            aliquota = (anno === 2025) ? 0.36 : 0.30;
        }
    } else if (tipologia === "superbonus") {
        aliquota = (anno === 2025) ? 0.65 : 0.00;
    }

    if (aliquota === 0.00) {
        output += `üö´ Nessuna aliquota disponibile per Superbonus nel ${anno}.`;
    } else {
        let aliquotaEffettiva = aliquota;
        if (isArt15 && reddito > 120000 && reddito <= 240000) {
            const riduzione = 1 - ((reddito - 120000) / 120000);
            aliquotaEffettiva = aliquota * riduzione;
            output += `<br>üîª Riduzione per reddito >120.000‚Ç¨ su spese art. 15 TUIR: <strong>${(aliquotaEffettiva * 100).toFixed(1)}%</strong>`;
        }
        output += `üîß Tipologia: <strong>${tipologia}</strong><br>`;
        output += `üè† Immobile: <strong>${abitazione === "principale" ? "Abitazione principale" : "Altra unit√†"}</strong><br>`;
        output += `üìÖ Anno: <strong>${anno}</strong><br>`;
        output += `üìà Aliquota detrazione: <strong>${(aliquotaEffettiva * 100).toFixed(1)}%</strong>`;
    }

    document.getElementById("risultato").innerHTML = output;
}
</script></body>
</html>
